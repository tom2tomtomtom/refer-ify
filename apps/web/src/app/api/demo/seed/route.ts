import { NextRequest, NextResponse } from 'next/server';
import { getSupabaseServiceClient } from '@/lib/supabase/service';

// Demo seed data endpoint - creates comprehensive realistic demo data for CEO walkthrough
export async function POST(request: NextRequest) {
  try {
    const supabase = getSupabaseServiceClient();

    // Demo user IDs
    const DEMO_USERS = {
      founding: '00000000-0000-0000-0000-000000000001',
      select: '00000000-0000-0000-0000-000000000002',
      client: '00000000-0000-0000-0000-000000000003',
      candidate: '00000000-0000-0000-0000-000000000004',
    };

    // Create 20 comprehensive demo candidates
    const demoCandidates = [
      // C-Level Executives (5)
      {
        id: '10000000-0000-0000-0000-000000000001',
        user_id: DEMO_USERS.candidate,
        first_name: 'Sarah',
        last_name: 'Chen',
        email: 'sarah.chen@example.com',
        phone: '+1-555-0101',
        location: 'San Francisco, CA',
        years_experience: 15,
        current_title: 'Chief Technology Officer',
        current_company: 'Tech Unicorn Inc',
        skills: ['Strategic Leadership', 'System Architecture', 'Team Building', 'Cloud Infrastructure', 'AI/ML'],
        linkedin_url: 'https://linkedin.com/in/sarachen',
        desired_roles: ['CTO', 'VP Engineering'],
        desired_locations: ['San Francisco', 'Remote', 'New York'],
        desired_salary_min: 300000,
        desired_salary_max: 450000,
        availability: 'passive',
        created_at: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000002',
        user_id: null,
        first_name: 'Michael',
        last_name: 'Rodriguez',
        email: 'michael.rodriguez@example.com',
        phone: '+1-555-0102',
        location: 'New York, NY',
        years_experience: 18,
        current_title: 'Chief Executive Officer',
        current_company: 'StartupX',
        skills: ['Strategic Planning', 'Fundraising', 'Business Development', 'Leadership', 'P&L Management'],
        linkedin_url: 'https://linkedin.com/in/michaelrodriguez',
        desired_roles: ['CEO', 'COO'],
        desired_locations: ['New York', 'San Francisco', 'Remote'],
        desired_salary_min: 350000,
        desired_salary_max: 500000,
        availability: 'passive',
        created_at: new Date(Date.now() - 55 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000003',
        user_id: null,
        first_name: 'Emily',
        last_name: 'Watson',
        email: 'emily.watson@example.com',
        phone: '+1-555-0103',
        location: 'Boston, MA',
        years_experience: 14,
        current_title: 'Chief Financial Officer',
        current_company: 'FinTech Corp',
        skills: ['Financial Planning', 'Strategic Finance', 'M&A', 'Investor Relations', 'Risk Management'],
        linkedin_url: 'https://linkedin.com/in/emilywatson',
        desired_roles: ['CFO', 'VP Finance'],
        desired_locations: ['Boston', 'New York', 'Remote'],
        desired_salary_min: 280000,
        desired_salary_max: 400000,
        availability: 'active',
        created_at: new Date(Date.now() - 50 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000004',
        user_id: null,
        first_name: 'David',
        last_name: 'Kim',
        email: 'david.kim@example.com',
        phone: '+1-555-0104',
        location: 'Seattle, WA',
        years_experience: 16,
        current_title: 'Chief Marketing Officer',
        current_company: 'Brand Leaders LLC',
        skills: ['Brand Strategy', 'Digital Marketing', 'Growth Hacking', 'Analytics', 'Team Leadership'],
        linkedin_url: 'https://linkedin.com/in/davidkim',
        desired_roles: ['CMO', 'VP Marketing'],
        desired_locations: ['Seattle', 'San Francisco', 'Remote'],
        desired_salary_min: 260000,
        desired_salary_max: 380000,
        availability: 'passive',
        created_at: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000005',
        user_id: null,
        first_name: 'Jennifer',
        last_name: 'Lee',
        email: 'jennifer.lee@example.com',
        phone: '+1-555-0105',
        location: 'Austin, TX',
        years_experience: 13,
        current_title: 'Chief Operating Officer',
        current_company: 'Operations Pro Inc',
        skills: ['Operations Management', 'Process Optimization', 'Supply Chain', 'Strategic Planning', 'Leadership'],
        linkedin_url: 'https://linkedin.com/in/jenniferlee',
        desired_roles: ['COO', 'VP Operations'],
        desired_locations: ['Austin', 'Remote', 'Dallas'],
        desired_salary_min: 270000,
        desired_salary_max: 390000,
        availability: 'active',
        created_at: new Date(Date.now() - 40 * 24 * 60 * 60 * 1000).toISOString(),
      },

      // VP/Director Level (8)
      {
        id: '10000000-0000-0000-0000-000000000006',
        user_id: null,
        first_name: 'Robert',
        last_name: 'Johnson',
        email: 'robert.johnson@example.com',
        phone: '+1-555-0106',
        location: 'San Francisco, CA',
        years_experience: 12,
        current_title: 'VP of Engineering',
        current_company: 'Tech Solutions Ltd',
        skills: ['Engineering Management', 'System Design', 'Agile', 'Kubernetes', 'Python'],
        linkedin_url: 'https://linkedin.com/in/robertjohnson',
        desired_roles: ['VP Engineering', 'CTO'],
        desired_locations: ['San Francisco', 'Remote'],
        desired_salary_min: 220000,
        desired_salary_max: 320000,
        availability: 'active',
        created_at: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000007',
        user_id: null,
        first_name: 'Lisa',
        last_name: 'Anderson',
        email: 'lisa.anderson@example.com',
        phone: '+1-555-0107',
        location: 'Los Angeles, CA',
        years_experience: 10,
        current_title: 'VP of Product',
        current_company: 'Product Innovators',
        skills: ['Product Strategy', 'Roadmap Planning', 'User Research', 'Data Analytics', 'Leadership'],
        linkedin_url: 'https://linkedin.com/in/lisaanderson',
        desired_roles: ['VP Product', 'CPO'],
        desired_locations: ['Los Angeles', 'San Francisco', 'Remote'],
        desired_salary_min: 200000,
        desired_salary_max: 280000,
        availability: 'active',
        created_at: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000008',
        user_id: null,
        first_name: 'James',
        last_name: 'Martinez',
        email: 'james.martinez@example.com',
        phone: '+1-555-0108',
        location: 'Chicago, IL',
        years_experience: 11,
        current_title: 'Director of Engineering',
        current_company: 'Enterprise Tech Co',
        skills: ['Engineering Leadership', 'Microservices', 'AWS', 'Team Building', 'DevOps'],
        linkedin_url: 'https://linkedin.com/in/jamesmartinez',
        desired_roles: ['Director Engineering', 'VP Engineering'],
        desired_locations: ['Chicago', 'Remote', 'New York'],
        desired_salary_min: 190000,
        desired_salary_max: 260000,
        availability: 'passive',
        created_at: new Date(Date.now() - 28 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000009',
        user_id: null,
        first_name: 'Maria',
        last_name: 'Garcia',
        email: 'maria.garcia@example.com',
        phone: '+1-555-0109',
        location: 'Miami, FL',
        years_experience: 9,
        current_title: 'Director of Product Management',
        current_company: 'SaaS Startup',
        skills: ['Product Management', 'Agile', 'B2B SaaS', 'Analytics', 'Customer Success'],
        linkedin_url: 'https://linkedin.com/in/mariagarcia',
        desired_roles: ['Director Product', 'VP Product'],
        desired_locations: ['Miami', 'Remote', 'Austin'],
        desired_salary_min: 170000,
        desired_salary_max: 240000,
        availability: 'active',
        created_at: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000010',
        user_id: null,
        first_name: 'William',
        last_name: 'Brown',
        email: 'william.brown@example.com',
        phone: '+1-555-0110',
        location: 'Denver, CO',
        years_experience: 10,
        current_title: 'VP of Sales',
        current_company: 'Sales Leaders Inc',
        skills: ['Enterprise Sales', 'Team Leadership', 'Strategic Partnerships', 'CRM', 'Negotiation'],
        linkedin_url: 'https://linkedin.com/in/williambrown',
        desired_roles: ['VP Sales', 'Chief Revenue Officer'],
        desired_locations: ['Denver', 'Remote', 'San Francisco'],
        desired_salary_min: 180000,
        desired_salary_max: 280000,
        availability: 'passive',
        created_at: new Date(Date.now() - 22 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000011',
        user_id: null,
        first_name: 'Amanda',
        last_name: 'Taylor',
        email: 'amanda.taylor@example.com',
        phone: '+1-555-0111',
        location: 'Portland, OR',
        years_experience: 8,
        current_title: 'Head of Design',
        current_company: 'Creative Agency',
        skills: ['Design Systems', 'UX/UI', 'Leadership', 'Figma', 'Product Design'],
        linkedin_url: 'https://linkedin.com/in/amandataylor',
        desired_roles: ['Head of Design', 'VP Design'],
        desired_locations: ['Portland', 'San Francisco', 'Remote'],
        desired_salary_min: 160000,
        desired_salary_max: 220000,
        availability: 'active',
        created_at: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000012',
        user_id: null,
        first_name: 'Daniel',
        last_name: 'Wilson',
        email: 'daniel.wilson@example.com',
        phone: '+1-555-0112',
        location: 'Atlanta, GA',
        years_experience: 11,
        current_title: 'Director of Data Science',
        current_company: 'AI Analytics Corp',
        skills: ['Machine Learning', 'Python', 'TensorFlow', 'Data Strategy', 'Team Leadership'],
        linkedin_url: 'https://linkedin.com/in/danielwilson',
        desired_roles: ['Director Data Science', 'VP Data'],
        desired_locations: ['Atlanta', 'Remote', 'Boston'],
        desired_salary_min: 185000,
        desired_salary_max: 260000,
        availability: 'active',
        created_at: new Date(Date.now() - 18 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000013',
        user_id: null,
        first_name: 'Sophia',
        last_name: 'Moore',
        email: 'sophia.moore@example.com',
        phone: '+1-555-0113',
        location: 'San Diego, CA',
        years_experience: 9,
        current_title: 'Director of Marketing',
        current_company: 'Growth Marketing LLC',
        skills: ['Digital Marketing', 'Content Strategy', 'SEO/SEM', 'Analytics', 'Team Management'],
        linkedin_url: 'https://linkedin.com/in/sophiamoore',
        desired_roles: ['Director Marketing', 'VP Marketing'],
        desired_locations: ['San Diego', 'Los Angeles', 'Remote'],
        desired_salary_min: 155000,
        desired_salary_max: 210000,
        availability: 'passive',
        created_at: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
      },

      // Senior IC Level (7)
      {
        id: '10000000-0000-0000-0000-000000000014',
        user_id: null,
        first_name: 'Alex',
        last_name: 'Thompson',
        email: 'alex.thompson@example.com',
        phone: '+1-555-0114',
        location: 'San Francisco, CA',
        years_experience: 7,
        current_title: 'Staff Software Engineer',
        current_company: 'Tech Giant',
        skills: ['React', 'TypeScript', 'Node.js', 'System Design', 'Mentorship'],
        linkedin_url: 'https://linkedin.com/in/alexthompson',
        github_url: 'https://github.com/alexthompson',
        desired_roles: ['Staff Engineer', 'Principal Engineer'],
        desired_locations: ['San Francisco', 'Remote', 'Seattle'],
        desired_salary_min: 180000,
        desired_salary_max: 250000,
        availability: 'active',
        created_at: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000015',
        user_id: null,
        first_name: 'Jessica',
        last_name: 'White',
        email: 'jessica.white@example.com',
        phone: '+1-555-0115',
        location: 'New York, NY',
        years_experience: 6,
        current_title: 'Senior Product Designer',
        current_company: 'Design Studio',
        skills: ['Product Design', 'Figma', 'Prototyping', 'User Research', 'Design Systems'],
        linkedin_url: 'https://linkedin.com/in/jessicawhite',
        portfolio_url: 'https://jessicawhite.design',
        desired_roles: ['Senior Designer', 'Lead Designer'],
        desired_locations: ['New York', 'Remote', 'San Francisco'],
        desired_salary_min: 140000,
        desired_salary_max: 190000,
        availability: 'active',
        created_at: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000016',
        user_id: null,
        first_name: 'Kevin',
        last_name: 'Harris',
        email: 'kevin.harris@example.com',
        phone: '+1-555-0116',
        location: 'Austin, TX',
        years_experience: 8,
        current_title: 'Senior Data Engineer',
        current_company: 'Data Platform Co',
        skills: ['Spark', 'Python', 'SQL', 'Airflow', 'AWS'],
        linkedin_url: 'https://linkedin.com/in/kevinharris',
        github_url: 'https://github.com/kevinharris',
        desired_roles: ['Senior Data Engineer', 'Staff Engineer'],
        desired_locations: ['Austin', 'Remote', 'Denver'],
        desired_salary_min: 165000,
        desired_salary_max: 220000,
        availability: 'passive',
        created_at: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000017',
        user_id: null,
        first_name: 'Rachel',
        last_name: 'Clark',
        email: 'rachel.clark@example.com',
        phone: '+1-555-0117',
        location: 'Boston, MA',
        years_experience: 6,
        current_title: 'Senior Product Manager',
        current_company: 'B2B SaaS Company',
        skills: ['Product Management', 'SQL', 'Analytics', 'Roadmapping', 'Stakeholder Management'],
        linkedin_url: 'https://linkedin.com/in/rachelclark',
        desired_roles: ['Senior PM', 'Principal PM'],
        desired_locations: ['Boston', 'Remote', 'New York'],
        desired_salary_min: 150000,
        desired_salary_max: 200000,
        availability: 'active',
        created_at: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000018',
        user_id: null,
        first_name: 'Brandon',
        last_name: 'Lewis',
        email: 'brandon.lewis@example.com',
        phone: '+1-555-0118',
        location: 'Seattle, WA',
        years_experience: 7,
        current_title: 'Senior DevOps Engineer',
        current_company: 'Cloud Services Inc',
        skills: ['Kubernetes', 'Terraform', 'AWS', 'CI/CD', 'Monitoring'],
        linkedin_url: 'https://linkedin.com/in/brandonlewis',
        github_url: 'https://github.com/brandonlewis',
        desired_roles: ['Senior DevOps', 'Platform Engineer'],
        desired_locations: ['Seattle', 'Remote', 'San Francisco'],
        desired_salary_min: 170000,
        desired_salary_max: 230000,
        availability: 'active',
        created_at: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000019',
        user_id: null,
        first_name: 'Nicole',
        last_name: 'Walker',
        email: 'nicole.walker@example.com',
        phone: '+1-555-0119',
        location: 'Chicago, IL',
        years_experience: 5,
        current_title: 'Senior Frontend Engineer',
        current_company: 'E-commerce Platform',
        skills: ['React', 'JavaScript', 'CSS', 'Performance Optimization', 'Accessibility'],
        linkedin_url: 'https://linkedin.com/in/nicolewalker',
        github_url: 'https://github.com/nicolewalker',
        desired_roles: ['Senior Frontend', 'Staff Engineer'],
        desired_locations: ['Chicago', 'Remote', 'Austin'],
        desired_salary_min: 145000,
        desired_salary_max: 195000,
        availability: 'passive',
        created_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '10000000-0000-0000-0000-000000000020',
        user_id: null,
        first_name: 'Christopher',
        last_name: 'Young',
        email: 'christopher.young@example.com',
        phone: '+1-555-0120',
        location: 'Los Angeles, CA',
        years_experience: 6,
        current_title: 'Senior Backend Engineer',
        current_company: 'Fintech Startup',
        skills: ['Python', 'Django', 'PostgreSQL', 'Redis', 'API Design'],
        linkedin_url: 'https://linkedin.com/in/christopheryoung',
        github_url: 'https://github.com/christopheryoung',
        desired_roles: ['Senior Backend', 'Staff Engineer'],
        desired_locations: ['Los Angeles', 'Remote', 'San Francisco'],
        desired_salary_min: 155000,
        desired_salary_max: 210000,
        availability: 'active',
        created_at: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
      },
    ];

    // Create 12 demo jobs across tiers
    const demoJobs = [
      // Exclusive Tier (3 jobs - C-level)
      {
        id: '20000000-0000-0000-0000-000000000001',
        client_id: DEMO_USERS.client,
        title: 'Chief Technology Officer',
        company: 'Tech Corp Inc',
        location: 'San Francisco, CA',
        job_type: 'full-time',
        salary_min: 300000,
        salary_max: 450000,
        description: 'Seeking an experienced CTO to lead our engineering organization through hypergrowth...',
        requirements: ['15+ years engineering experience', '5+ years C-level leadership', 'Experience scaling teams 100+', 'Strong system architecture background'],
        benefits: ['Competitive salary', 'Significant equity', 'Comprehensive health insurance', 'Unlimited PTO', 'Remote flexibility'],
        tier: 'exclusive',
        status: 'active',
        created_at: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000002',
        client_id: DEMO_USERS.client,
        title: 'Chief Financial Officer',
        company: 'Tech Corp Inc',
        location: 'New York, NY',
        job_type: 'full-time',
        salary_min: 280000,
        salary_max: 400000,
        description: 'Looking for a strategic CFO to drive financial planning and prepare for Series C...',
        requirements: ['12+ years finance experience', '3+ years CFO/VP Finance', 'IPO or M&A experience', 'Strong stakeholder management'],
        benefits: ['Competitive compensation', 'Equity package', 'Executive benefits', '401k matching', 'Relocation assistance'],
        tier: 'exclusive',
        status: 'active',
        created_at: new Date(Date.now() - 28 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000003',
        client_id: DEMO_USERS.client,
        title: 'VP of Engineering',
        company: 'Tech Corp Inc',
        location: 'San Francisco, CA (Hybrid)',
        job_type: 'full-time',
        salary_min: 250000,
        salary_max: 350000,
        description: 'Seeking a VP Engineering to lead our platform team and drive technical excellence...',
        requirements: ['10+ years engineering', '5+ years leadership', 'Proven track record scaling teams', 'Strong technical depth'],
        benefits: ['Competitive salary', 'Stock options', 'Health benefits', 'Learning budget', 'Flexible work'],
        tier: 'exclusive',
        status: 'active',
        created_at: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),
      },

      // Priority Tier (5 jobs - Senior/Director)
      {
        id: '20000000-0000-0000-0000-000000000004',
        client_id: DEMO_USERS.client,
        title: 'Director of Engineering',
        company: 'Tech Corp Inc',
        location: 'Seattle, WA',
        job_type: 'full-time',
        salary_min: 190000,
        salary_max: 260000,
        description: 'Join our growing engineering team as Director of Engineering...',
        requirements: ['8+ years engineering', '3+ years leadership', 'Microservices experience', 'AWS expertise'],
        benefits: ['Competitive pay', 'Equity', 'Health/dental/vision', '401k', 'Remote options'],
        tier: 'priority',
        status: 'active',
        created_at: new Date(Date.now() - 22 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000005',
        client_id: DEMO_USERS.client,
        title: 'Director of Product Management',
        company: 'Tech Corp Inc',
        location: 'Boston, MA',
        job_type: 'full-time',
        salary_min: 170000,
        salary_max: 240000,
        description: 'Lead our product organization and drive strategy for our B2B platform...',
        requirements: ['7+ years PM experience', '2+ years leadership', 'B2B SaaS background', 'Data-driven approach'],
        benefits: ['Strong compensation', 'Stock options', 'Full benefits', 'Professional development', 'Hybrid work'],
        tier: 'priority',
        status: 'active',
        created_at: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000006',
        client_id: DEMO_USERS.client,
        title: 'Head of Design',
        company: 'Tech Corp Inc',
        location: 'Los Angeles, CA',
        job_type: 'full-time',
        salary_min: 160000,
        salary_max: 220000,
        description: 'Shape the future of our product design and lead a team of talented designers...',
        requirements: ['8+ years design experience', 'Leadership experience', 'Design systems expertise', 'Strong portfolio'],
        benefits: ['Competitive salary', 'Equity', 'Benefits package', 'Creative freedom', 'Remote flexibility'],
        tier: 'priority',
        status: 'active',
        created_at: new Date(Date.now() - 18 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000007',
        client_id: DEMO_USERS.client,
        title: 'Staff Software Engineer',
        company: 'Tech Corp Inc',
        location: 'Remote (US)',
        job_type: 'full-time',
        salary_min: 180000,
        salary_max: 250000,
        description: 'Join our platform team as a Staff Engineer driving technical excellence...',
        requirements: ['8+ years engineering', 'Strong system design', 'Mentorship experience', 'React/Node.js expert'],
        benefits: ['Top-tier compensation', 'Stock options', 'Full remote', 'Learning budget', 'Health benefits'],
        tier: 'priority',
        status: 'active',
        created_at: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000008',
        client_id: DEMO_USERS.client,
        title: 'Director of Data Science',
        company: 'Tech Corp Inc',
        location: 'Austin, TX',
        job_type: 'full-time',
        salary_min: 185000,
        salary_max: 260000,
        description: 'Lead our data science initiatives and build ML-powered features...',
        requirements: ['8+ years data science', 'Leadership experience', 'ML/AI expertise', 'Python mastery'],
        benefits: ['Excellent compensation', 'Equity', 'Benefits', 'Conference budget', 'Flexible schedule'],
        tier: 'priority',
        status: 'active',
        created_at: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),
      },

      // Connect Tier (4 jobs - Mid-level)
      {
        id: '20000000-0000-0000-0000-000000000009',
        client_id: DEMO_USERS.client,
        title: 'Senior Product Manager',
        company: 'Tech Corp Inc',
        location: 'Chicago, IL',
        job_type: 'full-time',
        salary_min: 150000,
        salary_max: 200000,
        description: 'Drive product strategy for our core platform features...',
        requirements: ['5+ years PM experience', 'Technical background', 'Analytics skills', 'Strong communication'],
        benefits: ['Competitive pay', 'Stock options', 'Health benefits', 'Professional growth', 'Hybrid work'],
        tier: 'connect',
        status: 'active',
        created_at: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000010',
        client_id: DEMO_USERS.client,
        title: 'Senior Full-Stack Engineer',
        company: 'Tech Corp Inc',
        location: 'Denver, CO',
        job_type: 'full-time',
        salary_min: 145000,
        salary_max: 195000,
        description: 'Build and scale our platform using modern tech stack...',
        requirements: ['5+ years engineering', 'React/Node.js', 'Cloud experience', 'Strong problem-solving'],
        benefits: ['Good compensation', 'Equity', 'Benefits', 'Work-life balance', 'Remote options'],
        tier: 'connect',
        status: 'active',
        created_at: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000011',
        client_id: DEMO_USERS.client,
        title: 'Senior Product Designer',
        company: 'Tech Corp Inc',
        location: 'Portland, OR',
        job_type: 'full-time',
        salary_min: 140000,
        salary_max: 190000,
        description: 'Design exceptional user experiences for our product suite...',
        requirements: ['5+ years design', 'Figma expertise', 'Product thinking', 'Strong portfolio'],
        benefits: ['Fair compensation', 'Stock options', 'Benefits', 'Creative environment', 'Flexible hours'],
        tier: 'connect',
        status: 'active',
        created_at: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
      },
      {
        id: '20000000-0000-0000-0000-000000000012',
        client_id: DEMO_USERS.client,
        title: 'Senior Data Engineer',
        company: 'Tech Corp Inc',
        location: 'Remote (US)',
        job_type: 'full-time',
        salary_min: 155000,
        salary_max: 210000,
        description: 'Build scalable data infrastructure and pipelines...',
        requirements: ['5+ years data engineering', 'Spark/Airflow', 'SQL expertise', 'Cloud platforms'],
        benefits: ['Solid pay', 'Equity', 'Full remote', 'Learning budget', 'Health coverage'],
        tier: 'connect',
        status: 'active',
        created_at: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
      },
    ];

    // Create 35 referrals covering all pipeline stages
    const demoReferrals = [
      // Submitted (8)
      { id: '30000000-0000-0000-0000-000000000001', job_id: '20000000-0000-0000-0000-000000000001', candidate_id: '10000000-0000-0000-0000-000000000001', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Perfect fit for CTO role - proven track record', created_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000002', job_id: '20000000-0000-0000-0000-000000000002', candidate_id: '10000000-0000-0000-0000-000000000003', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Strong CFO candidate with IPO experience', created_at: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000003', job_id: '20000000-0000-0000-0000-000000000004', candidate_id: '10000000-0000-0000-0000-000000000006', referrer_id: DEMO_USERS.founding, status: 'submitted', notes: 'Excellent engineering leader', created_at: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000004', job_id: '20000000-0000-0000-0000-000000000005', candidate_id: '10000000-0000-0000-0000-000000000007', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Great product leader with B2B experience', created_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000005', job_id: '20000000-0000-0000-0000-000000000009', candidate_id: '10000000-0000-0000-0000-000000000017', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Strong PM with analytics background', created_at: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000006', job_id: '20000000-0000-0000-0000-000000000010', candidate_id: '10000000-0000-0000-0000-000000000014', referrer_id: DEMO_USERS.founding, status: 'submitted', notes: 'Talented full-stack engineer', created_at: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000007', job_id: '20000000-0000-0000-0000-000000000011', candidate_id: '10000000-0000-0000-0000-000000000015', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Exceptional design portfolio', created_at: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000008', job_id: '20000000-0000-0000-0000-000000000012', candidate_id: '10000000-0000-0000-0000-000000000016', referrer_id: DEMO_USERS.select, status: 'submitted', notes: 'Solid data engineering experience', created_at: new Date(Date.now() - 9 * 24 * 60 * 60 * 1000).toISOString() },

      // Reviewed (7)
      { id: '30000000-0000-0000-0000-000000000009', job_id: '20000000-0000-0000-0000-000000000003', candidate_id: '10000000-0000-0000-0000-000000000006', referrer_id: DEMO_USERS.founding, status: 'reviewed', notes: 'VP Engineering candidate - reviewing background', created_at: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000010', job_id: '20000000-0000-0000-0000-000000000006', candidate_id: '10000000-0000-0000-0000-000000000011', referrer_id: DEMO_USERS.select, status: 'reviewed', notes: 'Design lead under review', created_at: new Date(Date.now() - 11 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000011', job_id: '20000000-0000-0000-0000-000000000007', candidate_id: '10000000-0000-0000-0000-000000000014', referrer_id: DEMO_USERS.select, status: 'reviewed', notes: 'Staff engineer candidate reviewed', created_at: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000012', job_id: '20000000-0000-0000-0000-000000000008', candidate_id: '10000000-0000-0000-0000-000000000012', referrer_id: DEMO_USERS.founding, status: 'reviewed', notes: 'Data science director in review', created_at: new Date(Date.now() - 13 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000013', job_id: '20000000-0000-0000-0000-000000000004', candidate_id: '10000000-0000-0000-0000-000000000008', referrer_id: DEMO_USERS.select, status: 'reviewed', notes: 'Engineering director under consideration', created_at: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000014', job_id: '20000000-0000-0000-0000-000000000010', candidate_id: '10000000-0000-0000-0000-000000000019', referrer_id: DEMO_USERS.select, status: 'reviewed', notes: 'Senior frontend engineer reviewed', created_at: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000015', job_id: '20000000-0000-0000-0000-000000000012', candidate_id: '10000000-0000-0000-0000-000000000016', referrer_id: DEMO_USERS.founding, status: 'reviewed', notes: 'Data engineer profile under review', created_at: new Date(Date.now() - 16 * 24 * 60 * 60 * 1000).toISOString() },

      // Shortlisted (6)
      { id: '30000000-0000-0000-0000-000000000016', job_id: '20000000-0000-0000-0000-000000000001', candidate_id: '10000000-0000-0000-0000-000000000001', referrer_id: DEMO_USERS.founding, status: 'shortlisted', notes: 'CTO candidate shortlisted for interview', created_at: new Date(Date.now() - 17 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000017', job_id: '20000000-0000-0000-0000-000000000005', candidate_id: '10000000-0000-0000-0000-000000000009', referrer_id: DEMO_USERS.select, status: 'shortlisted', notes: 'Product director shortlisted', created_at: new Date(Date.now() - 18 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000018', job_id: '20000000-0000-0000-0000-000000000007', candidate_id: '10000000-0000-0000-0000-000000000014', referrer_id: DEMO_USERS.founding, status: 'shortlisted', notes: 'Staff engineer in final consideration', created_at: new Date(Date.now() - 19 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000019', job_id: '20000000-0000-0000-0000-000000000009', candidate_id: '10000000-0000-0000-0000-000000000017', referrer_id: DEMO_USERS.select, status: 'shortlisted', notes: 'Senior PM shortlisted', created_at: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000020', job_id: '20000000-0000-0000-0000-000000000011', candidate_id: '10000000-0000-0000-0000-000000000015', referrer_id: DEMO_USERS.select, status: 'shortlisted', notes: 'Designer moving to next round', created_at: new Date(Date.now() - 21 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000021', job_id: '20000000-0000-0000-0000-000000000010', candidate_id: '10000000-0000-0000-0000-000000000020', referrer_id: DEMO_USERS.founding, status: 'shortlisted', notes: 'Backend engineer shortlisted', created_at: new Date(Date.now() - 22 * 24 * 60 * 60 * 1000).toISOString() },

      // Interviewing (5)
      { id: '30000000-0000-0000-0000-000000000022', job_id: '20000000-0000-0000-0000-000000000002', candidate_id: '10000000-0000-0000-0000-000000000003', referrer_id: DEMO_USERS.founding, status: 'interviewing', notes: 'CFO - final round interviews scheduled', created_at: new Date(Date.now() - 23 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000023', job_id: '20000000-0000-0000-0000-000000000003', candidate_id: '10000000-0000-0000-0000-000000000006', referrer_id: DEMO_USERS.select, status: 'interviewing', notes: 'VP Eng in interview process', created_at: new Date(Date.now() - 24 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000024', job_id: '20000000-0000-0000-0000-000000000008', candidate_id: '10000000-0000-0000-0000-000000000012', referrer_id: DEMO_USERS.select, status: 'interviewing', notes: 'Data science director interviewing', created_at: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000025', job_id: '20000000-0000-0000-0000-000000000006', candidate_id: '10000000-0000-0000-0000-000000000011', referrer_id: DEMO_USERS.founding, status: 'interviewing', notes: 'Design head in interviews', created_at: new Date(Date.now() - 26 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000026', job_id: '20000000-0000-0000-0000-000000000004', candidate_id: '10000000-0000-0000-0000-000000000008', referrer_id: DEMO_USERS.select, status: 'interviewing', notes: 'Engineering director interviewing', created_at: new Date(Date.now() - 27 * 24 * 60 * 60 * 1000).toISOString() },

      // Hired (4)
      { id: '30000000-0000-0000-0000-000000000027', job_id: '20000000-0000-0000-0000-000000000010', candidate_id: '10000000-0000-0000-0000-000000000014', referrer_id: DEMO_USERS.founding, status: 'hired', notes: 'Hired! Excellent full-stack engineer', created_at: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000028', job_id: '20000000-0000-0000-0000-000000000009', candidate_id: '10000000-0000-0000-0000-000000000017', referrer_id: DEMO_USERS.select, status: 'hired', notes: 'Hired! Great product manager fit', created_at: new Date(Date.now() - 40 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000029', job_id: '20000000-0000-0000-0000-000000000011', candidate_id: '10000000-0000-0000-0000-000000000015', referrer_id: DEMO_USERS.select, status: 'hired', notes: 'Hired! Exceptional designer', created_at: new Date(Date.now() - 42 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000030', job_id: '20000000-0000-0000-0000-000000000012', candidate_id: '10000000-0000-0000-0000-000000000016', referrer_id: DEMO_USERS.founding, status: 'hired', notes: 'Hired! Strong data engineer', created_at: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000).toISOString() },

      // Rejected (5)
      { id: '30000000-0000-0000-0000-000000000031', job_id: '20000000-0000-0000-0000-000000000004', candidate_id: '10000000-0000-0000-0000-000000000018', referrer_id: DEMO_USERS.select, status: 'rejected', notes: 'Not the right fit for this role', created_at: new Date(Date.now() - 50 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000032', job_id: '20000000-0000-0000-0000-000000000005', candidate_id: '10000000-0000-0000-0000-000000000013', referrer_id: DEMO_USERS.select, status: 'rejected', notes: 'Experience mismatch', created_at: new Date(Date.now() - 52 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000033', job_id: '20000000-0000-0000-0000-000000000007', candidate_id: '10000000-0000-0000-0000-000000000019', referrer_id: DEMO_USERS.founding, status: 'rejected', notes: 'Skills not aligned', created_at: new Date(Date.now() - 54 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000034', job_id: '20000000-0000-0000-0000-000000000006', candidate_id: '10000000-0000-0000-0000-000000000013', referrer_id: DEMO_USERS.select, status: 'rejected', notes: 'Candidate withdrew', created_at: new Date(Date.now() - 56 * 24 * 60 * 60 * 1000).toISOString() },
      { id: '30000000-0000-0000-0000-000000000035', job_id: '20000000-0000-0000-0000-000000000008', candidate_id: '10000000-0000-0000-0000-000000000018', referrer_id: DEMO_USERS.founding, status: 'rejected', notes: 'Position filled internally', created_at: new Date(Date.now() - 58 * 24 * 60 * 60 * 1000).toISOString() },
    ];

    // Create 36 revenue transactions (12 months of data)
    const demoRevenue = [];
    const months = 12;
    let revenueId = 1;

    for (let i = 0; i < months; i++) {
      const daysAgo = i * 30;
      const baseAmount = 25000 + Math.random() * 20000;

      // Founding Circle transaction (45% of fee)
      demoRevenue.push({
        id: `40000000-0000-0000-0000-0000000000${String(revenueId).padStart(2, '0')}`,
        referral_id: `30000000-0000-0000-0000-000000000027`, // Reference hired referral
        referrer_id: DEMO_USERS.founding,
        amount: Math.round(baseAmount * 0.45),
        type: 'placement_fee',
        status: 'completed',
        created_at: new Date(Date.now() - daysAgo * 24 * 60 * 60 * 1000).toISOString(),
      });
      revenueId++;

      // Select Circle transaction (40% of fee)
      demoRevenue.push({
        id: `40000000-0000-0000-0000-0000000000${String(revenueId).padStart(2, '0')}`,
        referral_id: `30000000-0000-0000-0000-000000000028`,
        referrer_id: DEMO_USERS.select,
        amount: Math.round(baseAmount * 0.40),
        type: 'placement_fee',
        status: 'completed',
        created_at: new Date(Date.now() - daysAgo * 24 * 60 * 60 * 1000).toISOString(),
      });
      revenueId++;

      // Platform fee (15% of fee)
      demoRevenue.push({
        id: `40000000-0000-0000-0000-0000000000${String(revenueId).padStart(2, '0')}`,
        referral_id: `30000000-0000-0000-0000-000000000029`,
        referrer_id: null, // Platform fee
        amount: Math.round(baseAmount * 0.15),
        type: 'platform_fee',
        status: 'completed',
        created_at: new Date(Date.now() - daysAgo * 24 * 60 * 60 * 1000).toISOString(),
      });
      revenueId++;
    }

    // Insert all demo data (upsert to avoid conflicts)
    const results = await Promise.allSettled([
      supabase.from('candidates').upsert(demoCandidates, { onConflict: 'id' }),
      supabase.from('jobs').upsert(demoJobs, { onConflict: 'id' }),
      supabase.from('referrals').upsert(demoReferrals, { onConflict: 'id' }),
      supabase.from('payment_transactions').upsert(demoRevenue, { onConflict: 'id' }),
    ]);

    // Check for errors
    const errors = results
      .filter((r) => r.status === 'rejected')
      .map((r: any) => r.reason);

    if (errors.length > 0) {
      console.error('Demo seed errors:', errors);
    }

    return NextResponse.json({
      success: true,
      message: 'Comprehensive demo data seeded successfully',
      seeded: {
        candidates: demoCandidates.length,
        jobs: demoJobs.length,
        referrals: demoReferrals.length,
        revenue: demoRevenue.length,
      },
      errors: errors.length > 0 ? errors : undefined,
    });
  } catch (error: any) {
    console.error('Demo seed error:', error);
    return NextResponse.json(
      {
        success: false,
        error: 'Failed to seed demo data',
        details: error.message,
      },
      { status: 500 }
    );
  }
}

// GET endpoint to check if demo data exists
export async function GET(request: NextRequest) {
  try {
    const supabase = getSupabaseServiceClient();

    const [candidates, jobs, referrals, revenue] = await Promise.all([
      supabase.from('candidates').select('id', { count: 'exact', head: true }).like('id', '10000000-%'),
      supabase.from('jobs').select('id', { count: 'exact', head: true }).like('id', '20000000-%'),
      supabase.from('referrals').select('id', { count: 'exact', head: true }).like('id', '30000000-%'),
      supabase.from('payment_transactions').select('id', { count: 'exact', head: true }).like('id', '40000000-%'),
    ]);

    return NextResponse.json({
      exists: {
        candidates: (candidates.count || 0) > 0,
        jobs: (jobs.count || 0) > 0,
        referrals: (referrals.count || 0) > 0,
        revenue: (revenue.count || 0) > 0,
      },
      counts: {
        candidates: candidates.count || 0,
        jobs: jobs.count || 0,
        referrals: referrals.count || 0,
        revenue: revenue.count || 0,
      },
    });
  } catch (error: any) {
    return NextResponse.json(
      { error: 'Failed to check demo data', details: error.message },
      { status: 500 }
    );
  }
}